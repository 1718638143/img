<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>随机壁纸</title>
		<style>
			/* 去掉默认边距、隐藏滚动条 */
			html,
			body {
				margin: 0;
				padding: 0;
				height: 100%;
				overflow: hidden;
				background-color: #1a1a1a;
			}

			/* 容器居中显示图片 */
			.wallpaper-container {
				width: 100vw;
				height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
				position: relative;
			}

			/* 图片自然全屏显示设置 */
			#wallpaper {
				max-width: 100vw;
				max-height: 100vh;
				object-fit: contain;
				display: none;
				/* 初始隐藏图片 */
				opacity: 0;
				/* 初始透明度为0 */
				transition: opacity 0.5s ease;
				/* 淡入效果 */
				box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
			}

			/* 加载状态样式 */
			.loading {
				color: #ffffff;
				font-family: sans-serif;
				font-size: 1.2rem;
				transition: opacity 0.3s ease;
				/* 淡出效果 */
			}
		</style>
	</head>
	<body>
		<div class="wallpaper-container">
			<div class="loading">加载中...</div>
			<img id="wallpaper" alt="随机壁纸" referrerpolicy="no-referrer">
		</div>

		<script>
			const num = Math.floor(Math.random() * 100) + 1;
			const cdn1 =
			`https://gh-proxy.com/https://raw.githubusercontent.com/1718638143/img/refs/heads/master/img/${num}.png`;
			//const cdn1 = `https://cdn.jsdelivr.net/gh/1718638143/img/img/${num}.png`;
			//const cdn1 = `https://ghfast.top//https://raw.githubusercontent.com/1718638143/img/refs/heads/master/img/${num}.png`;

			const img = document.getElementById('wallpaper');
			const loading = document.querySelector('.loading');

			// 图片加载完成后先隐藏提示再显示图片
			img.onload = function() {
				// 第一步：隐藏加载提示（淡出效果）
				loading.style.opacity = '0';

				// 等待提示完全隐藏后（300ms与CSS过渡时间匹配）
				setTimeout(() => {
					loading.style.display = 'none';

					// 第二步：显示图片（淡入效果）
					img.style.display = 'block';
					// 触发重排后再设置透明度，确保过渡效果生效
					setTimeout(() => {
						img.style.opacity = '1';
					}, 10);
				}, 300);
			};

			// 图片加载失败处理
			img.onerror = function() {
				loading.textContent = `图片加载失败 (编号: ${num})，请刷新页面重试`;
			};

			// 设置图片源，开始加载
			img.src = cdn1;
		</script>
	</body>
</html>
